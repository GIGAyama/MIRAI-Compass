# **🧭 みらいコンパス**

**「みらいコンパス」は、公立小学校での「自由進度学習」を強力に支援するGoogle Apps Script (GAS) ウェブアプリケーションです。**

子どもたちが自ら学習計画を立て、実行し、振り返るサイクルをデジタル化。先生はリアルタイムで子どもたちの学びを見取り、適切なサポートを行うことができます。GIGAスクール構想の1人1台端末（Chromebook等）での動作に最適化されています。

## **✨ 特徴**

### **👦 児童用機能 (Student Mode)**

* **学習計画の作成**: ドラッグ＆ドロップで直感的に時間割ごとのタスク計画を作成。  
* **今日の学習**: タイムライン形式で進捗を可視化。スタンプ機能で達成感を演出。  
* **ふりかえり & ポートフォリオ**: 毎時間の学びを記録し、単元を通しての成長をレーダーチャートで可視化。  
* **みんなの計画 (ギャラリーウォーク)**: 友達の計画を参照し、学び合いを促進（匿名/記名切り替え可）。  
* **自分用タイマー**: 個別学習に便利なカウントアップ/ダウンタイマー。  
* **SOS / 集中モード**: 先生へステータスをリアルタイム通知。

### **👩‍🏫 先生用機能 (Teacher Mode)**

* **LIVEモニタリング**: クラス全員の学習状況（タスク、進捗、SOS）をリアルタイムで把握。  
* **座席表ビュー**: 実際の教室配置に合わせてカードを配置・監視。  
* **ヒートマップ**: クラス全体の進捗状況を一覧で俯瞰。  
* **単元設計 (AIアシスト)**: 生成AI（ChatGPT/Gemini）で作成した授業案JSONのインポートに対応。  
* **名簿管理 (Ver 2.1 NEW)**: Excel/CSVからのコピペ登録、出席番号管理、転出児童の非表示設定。  
* **外部連携**: 「みらいパスポート」等の外部アプリへ学習データを連携。

## **🛠 ファイル構成**

プロジェクトは以下のファイルで構成されています。

/  
├── Code.gs           \# サーバーサイドロジック (DB操作、APIエンドポイント)  
├── index.html        \# エントリーポイント (ライブラリ読み込み、ファイル結合)  
├── css.html          \# スタイルシート (デザイン定義)  
├── js\_core.html      \# 共通ロジック (設定、データ管理、通信)  
├── js\_student.html   \# 児童用画面ロジック  
└── js\_teacher.html   \# 先生用画面ロジック

## **🚀 インストール & デプロイ手順**

このアプリはGoogle Apps Scriptとして動作します。サーバーの契約は不要です。

1. **プロジェクトの作成**:  
   * [Google Apps Script](https://script.google.com/) にアクセスし、「新しいプロジェクト」を作成します。  
2. **ファイルの作成**:  
   * エディタ上で上記の「ファイル構成」にある6つのファイルを作成し、それぞれのコードを貼り付けます。  
   * ※ Code.gs 以外のファイルは、拡張子を .html として作成してください。  
3. **デプロイ**:  
   * 右上の「デプロイ」ボタン \> 「新しいデプロイ」を選択。  
   * **種類の選択**: 「ウェブアプリ」  
   * **次のユーザーとして実行**: 「自分」  
   * **アクセスできるユーザー**: 「全員」（または「Googleアカウントを持つ全員」）  
   * 「デプロイ」をクリックし、発行された **ウェブアプリURL** をコピーします。  
4. **初回セットアップ**:  
   * 発行されたURLにアクセスします。  
   * 「初期設定を開始する」ボタンが表示されるのでクリックします（Googleドライブにデータベース用スプレッドシートが自動生成されます）。  
   * 先生用ログイン（初期パスワード: admin）で入り、名簿や単元を登録してください。

## **💻 技術スタック**

* **Backend**: Google Apps Script (GAS)  
* **Database**: Google Spreadsheet  
* **Frontend**: HTML5, CSS3, JavaScript (ES6)  
* **Libraries (CDN)**:  
  * [Bootstrap 5](https://getbootstrap.com/) (UI Framework)  
  * [SweetAlert2](https://sweetalert2.github.io/) (Modals)  
  * [Chart.js](https://www.chartjs.org/) (Data Visualization)  
  * [Sortable.js](https://sortablejs.github.io/Sortable/) (Drag & Drop)  
  * [SheetJS (xlsx)](https://sheetjs.com/) (Excel Import)  
  * [Google Fonts](https://fonts.google.com/) (Zen Maru Gothic)

## **🤝 外部連携について**

本アプリは、外部の学習記録アプリ（通称：みらいパスポート）との連携機能を備えています。

* **Direct DB Write**: 先生が作成した単元計画を、相手先のスプレッドシートに直接書き込んで連携します。  
* **Launcher**: タスクカードからパラメータ付きURLで外部アプリを起動します。  
* **Status Sync**: 外部アプリからのSOS通知等をWebhook (
